{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"ä¸€çº§","path":"yi","rule":"js:\n/*\nby Î±(zetalpha)\nä¸€çº§å°è£…\nåŠ¨æ€åˆ†ç±» åˆ—è¡¨åˆ›å»º è‡ªåŠ¨ä¸‹ä¸€é¡µ\nver 20231017 1.0\n*/\n\n//éšæœºé¢œè‰²\nvar getRangeColors = function() {\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);\n}\n\n//åŠ¨æ€åˆ†ç±»\nfunction dynamicClass(options) {\n    const obj = {\n        //é»˜è®¤å€¼\n        layout: \"undefined\",\n        html: \"empty\",\n        page: 0,\n        åˆ†ç±»é¢œè‰²: \"#FA7298\",\n        æŠ˜å : \"â€œâ€œâ€â€<b>\" + \"âˆ§\".fontcolor(\"#1aad19\") + \"</b>\",\n        å±•å¼€: \"â€œâ€œâ€â€<b>\" + \"âˆ¨\".fontcolor(\"#FF0000\") + \"</b>\",\n        open: true,\n        state: MY_RULE.url,\n        search: false,\n        clears: [],\n        clearall: [\"yi_firstpage\"],\n        debug: false,\n\n        é¢„è®¾(param) {\n            if (param == undefined) {\n                param = [];\n            }\n            Object.keys(param).forEach((property) => {\n                // å¯¹æ¯ä¸ªå±æ€§åæ‰§è¡Œæ“ä½œ\n                const value = param[property]; // è·å–å±æ€§å€¼\n                // åœ¨è¿™é‡Œæ‰§è¡Œæ‚¨çš„æ“ä½œ\n                this[property] = value;\n                if (this.debug) {\n                    console.log(property + \":\" + value);\n                }\n            });\n        },\n        evalJSRule(item,\n            jsRule) {\n            let rule = jsRule.replace(\"@js:\",\n                \"\");\n            rule = rule.trim();\n            //log($.stringify(rule))\n            let input = item;\n            if (rule.startsWith(\"(\")) {\n                eval(\"result = \" + rule);\n            } else {\n                /**\n                 * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\n                 */\n                eval(\"result = \" + \"(() => {\" + rule + \"})()\");\n            }\n            return result || \"\";\n        },\n        getTitle(src, category) {\n            let title = \"\";\n            let titleRule = category || \"a&&Text\";\n            if (titleRule.startsWith(\"@js:\")) {\n                title = this.evalJSRule(src, titleRule);\n            } else {\n                title = parseDomForHtml(src, titleRule);\n            }\n            return title || \"\";\n        },\n        getUrl(src, category) {\n            let url = \"\";\n            let urlRule = category.é“¾æ¥ || \"a&&href\";\n            if (urlRule.startsWith(\"@js:\")) {\n                url = this.evalJSRule(src, urlRule);\n            } else {\n                url = pd(src, urlRule);\n            }\n            if (typeof category.é“¾æ¥å¤„ç† == \"function\") {\n                url = category.é“¾æ¥å¤„ç†(url);\n            }\n            return url || \"\";\n        },\n        isNull(param) {\n            if (param == null) {\n                return this;\n            }\n            return false;\n        },\n        isBoolean(variable) {\n            if (typeof variable !== \"boolean\") {\n                throw new Error(\"å¼€å¯æŠ˜å è¯·ä¼ å…¥å¸ƒå°”å€¼\");\n            }\n        },\n        æ¸…é™¤(list) {\n            if (this.isNull(list)) {\n                return this;\n            }\n            if (list.constructor == String) {\n                throw new Error(\"æ¸…é™¤æŠ¥é”™:è¯·ä¼ åˆ—è¡¨\");\n            }\n            this.clears = list;\n            return this;\n        },\n        å…¨æ¸…(list) {\n            if (this.isNull(list)) {\n                return this;\n            }\n            var c = this.clearall;\n            list = c.concat(list);\n            this.clearall = list;\n            return this;\n        },\n        æºç (input) {\n            this.html = input;\n            return this;\n        },\n        ç•Œé¢(input) {\n            this.layout = input;\n            return this;\n        },\n        é¡µç (input) {\n            this.page = input;\n            return this;\n        },\n        çŠ¶æ€(input) {\n            this.state = input;\n            return this;\n        },\n        å¼€å¯æœç´¢(input) {\n            if (input == undefined) {\n                input = true;\n            }\n            this.search = input;\n            return this;\n        },\n        å¼€å¯æŠ˜å (input) {\n            if (input == undefined) {\n                input = true;\n            }\n            this.isBoolean(input);\n            this.open = input;\n            return this;\n        },\n        setTitle(k, i, t) {\n            return k == i ? \"â€œâ€œâ€â€\" + t.fontcolor(this.åˆ†ç±»é¢œè‰²) : t;\n        },\n        action(obj) {\n            return [{\n                title: \"æ¸…é™¤çŠ¶æ€\",\n                js: $.toString((obj) => {\n                    log(obj);\n                    clearMyVar(obj.state);\n                    clearMyVar(\"head.cate\");\n                    clearMyVar('cate_button');\n                    obj.all.forEach((item) => {\n                        clearMyVar(item);\n                    });\n                    obj.cl.forEach((item) => {\n                        clearMyVar(item);\n                    });\n                    refreshPage();\n                }, obj),\n            }, ];\n        },\n        checkParam() {\n            var obj = {};\n            if (this.page == 0 && typeof page == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥é¡µç \");\n            } else {\n                if (typeof page == \"undefined\") {\n                    obj[\"é¡µç \"] = this.page;\n                } else {\n                    obj[\"é¡µç \"] = page;\n                }\n            }\n            if (this.html == \"empty\" && typeof html == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥æºç \");\n            } else {\n                if (typeof html == \"undefined\") {\n                    obj[\"æºç \"] = this.html;\n                } else {\n                    obj[\"æºç \"] = html;\n                }\n            }\n            if (this.layout == \"undefined\" && typeof d == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥ç•Œé¢\");\n            } else {\n                if (typeof d == \"undefined\") {\n                    obj[\"ç•Œé¢\"] = this.layout;\n                } else {\n                    obj[\"ç•Œé¢\"] = d;\n                }\n            }\n            return obj;\n        },\n        åˆ›å»ºåŠ¨æ€åˆ†ç±»(ruleObj) {\n            let items = [];\n            let cates = [];\n            if (ruleObj == undefined) {\n                ruleObj = [];\n            }\n            //åˆå§‹åŒ–å˜é‡å¼€å§‹\n            const param = this.checkParam();\n            const page = param.é¡µç ;\n            const html = param.æºç ;\n            const d = param.ç•Œé¢;\n            const çŠ¶æ€ = this.state;\n            const search = this.search;\n            const empty = \"hiker://empty\";\n            const æŠ˜å çŠ¶æ€ = this.open;\n            var å±•å¼€ = this.å±•å¼€;\n            var æŠ˜å  = this.æŠ˜å ;\n            var å…¨æ¸… = this.clearall;\n            var æ¸…é™¤ = this.clears;\n            //åˆå§‹åŒ–å˜é‡ç»“æŸ\n            let init_cate = new Array(20).fill(\"0\");\n            const fold = getMyVar(MY_RULE.group, \"0\");\n            const cate_temp = JSON.parse(\n                getMyVar(\"head.cate\", JSON.stringify(init_cate))\n            );\n            if (search && page == 1) {\n                items.push({\n                    title: \"\",\n                    url: \"'hiker://search?rule=\" + MY_RULE.title + \"&s='+input\",\n                    desc: \"æœç´¢å…³é”®è¯\",\n                    col_type: \"input\",\n                    extra: {\n                        defaultValue: getMyVar(\"keyword\", \"\"),\n                        onChange: $.toString(() => {\n                            putMyVar(\"keyword\", input);\n                        }),\n                    },\n                });\n            }\n            const categories = [];\n            ruleObj.forEach((x) => {\n                var list = [];\n                //log(x)\n                if (x.json != undefined) {\n                    x.json.map(k => {\n                        categories.push(JSON.stringify(k).replace(/^\\[|\\]$/g, ''))\n                    })\n                    //categories.push(x.json)\n                }\n                if (x.ä¸€çº§å®šä½) {\n                    if (x.ä¸€çº§å®šä½.startsWith(\"@js:\")) {\n                        list = this.evalJSRule(html, x.ä¸€çº§å®šä½);\n                    } else {\n                        list = pdfa(html, x.ä¸€çº§å®šä½);\n                    }\n                }\n                if (x.å¤§ç±»å®šä½) {\n                    if (x.å¤§ç±»å®šä½.startsWith(\"@js:\")) {\n                        list = this.evalJSRule(html, x.å¤§ç±»å®šä½);\n                    } else {\n                        list = [pdfa(html, x.å¤§ç±»å®šä½).join('\\n')];\n                    }\n                }\n                //--é¢å¤–å¤„ç†--\n                if (('å¢åŠ ' in x)) {\n                    if (x.å¢åŠ .constructor == String) {\n                        x.å¢åŠ  = eval(x.å¢åŠ );\n                    }\n                    slist = x.å¢åŠ .concat(slist);\n                }\n                if (('è¡¥å……' in x)) {\n                    if (x.è¡¥å…….constructor == String) {\n                        x.è¡¥å…… = eval(x.è¡¥å……);\n                    }\n                    slist = slist.concat(x.è¡¥å……);\n                }\n                //--é¢å¤–å¤„ç†--\n                var ä¸€çº§ = list.map((s) => {\n                    var slist = [];\n                    if (!(\"å°ç±»\" in x)) {\n                        x.å°ç±» = \"body&&a:not(:matches(é¦–é¡µ)):not(a:not([href]))\";\n                    }\n                    if (x.å°ç±».startsWith(\"@js:\")) {\n                        slist = this.evalJSRule(s, x.å°ç±»);\n                    } else {\n                        slist = pdfa(s, x.å°ç±»);\n                    }\n                    var å®šä½ = slist.map((item) => {\n                        var title = this.getTitle(item, x.æ ‡é¢˜);\n                        var url = this.getUrl(item, x);\n                        var obj = {\n                            title: title,\n                            url: url\n                        };\n                        return JSON.stringify(obj);\n                    });\n                    return å®šä½;\n                });\n                //log(ä¸€çº§)\n                //log(ä¸€çº§.length)\n                if (ä¸€çº§.length == 1) {\n                    categories.push(ä¸€çº§.join(\"\\n\"));\n                } else {\n                    ä¸€çº§.forEach((item) => {\n                        categories.push(item.join(\",\"));\n                    });\n                }\n                //log(categories)\n            });\n            if (æŠ˜å çŠ¶æ€) {\n                if (page == 1) {\n                    items.push({\n                        title: fold === \"1\" ? æŠ˜å  : å±•å¼€,\n                        url: $(\"#noLoading#\").lazyRule(\n                            (title, fold, u, all, exps) => {\n                                var fold = getMyVar(MY_RULE.group, fold);\n\n                                var [å±•å¼€, æŠ˜å ] = exps;\n\n                                if (fold == 1) {\n                                    var cx = findItemsByCls(title + 'cate_button');\n                                    storage0.putMyVar('cate_button', cx);\n                                    deleteItemByCls(title + 'cate_button');\n\n                                } else {\n                                    var cx = storage0.getMyVar('cate_button', []).map(x => {\n                                        x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\n                                        return x;\n                                    });\n                                    addItemAfter(title + 'cate_line', cx)\n                                }\n\n                                /*all.forEach((item) => {\n                                  clearMyVar(item);\n                                });*/\n                                updateItem(title + 'cate_exp', {\n                                    title: fold == 1 ? å±•å¼€ : æŠ˜å ,\n                                })\n\n                                putMyVar(MY_RULE.group, fold === \"1\" ? \"0\" : \"1\");\n\n                                //refreshPage(false);\n                                return \"hiker://empty\";\n                            },\n                            MY_RULE.title,\n                            fold,\n                            çŠ¶æ€,\n                            å…¨æ¸…, [å±•å¼€,\n                                æŠ˜å \n                            ],\n                        ),\n                        col_type: \"scroll_button\",\n                        extra: {\n                            id: MY_RULE.title + 'cate_exp',\n                            longClick: this.action({\n                                state: çŠ¶æ€,\n                                all: å…¨æ¸…,\n                                cl: æ¸…é™¤,\n                            }),\n                        },\n                    });\n                }\n            }\n            if (page == 1) {\n                categories.forEach((category, index) => {\n                    //log(category)\n                    let sub_categories = [];\n                    /*if (å°ç±»å®šä½.includes(\";\")) {\n                      sub_categories = pdfa(category, å°ç±»å®šä½.split(\";\")[0]);\n                      if (sub_categories.length == 0) {\n                        sub_categories = pdfa(category, å°ç±»å®šä½.split(\";\")[1]);\n                      }\n                    } else {*/\n                    //log(index)\n                    sub_categories = JSON.parse(`[${category}]`);\n                    //log(sub_categories)\n                    // sub_categories = pdfa(category, å°ç±»å®šä½);\n                    //}\n                    if (index === 0) {\n                        //å¤§ç±»\n                        sub_categories.forEach((item, key) => {\n\n                            //let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\n                            let title = item.title;\n\n                            if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                title = title.replace(newRegExp(æ’é™¤, \"g\"), \"\");\n                            }\n                            let json = ''\n                            json = item.url;\n\n                            let params = {\n                                cate_temp: cate_temp,\n                                key: key,\n                                page: page,\n                                clears: æ¸…é™¤,\n                                json: json,\n                                state: çŠ¶æ€,\n                                allclears: å…¨æ¸…,\n                            };\n\n                            //let url = pd(item, _å¤§ç±»é“¾æ¥);\n                            let url = item.url;\n                            /*if (å¤§ç±»å¤„ç†) {\n                              url = ä¸€çº§åˆ†ç±»å¤„ç†(url);\n                            }*/\n                            //log(url)\n                            items.push({\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\n                                col_type: \"scroll_button\",\n                                url: $(\"hiker://empty#noLoading#\").lazyRule((params) => {\n                                        let new_cate = [];\n                                        params.clears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        params.allclears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        clearMyVar('cate_button');\n\n                                        params.cate_temp.forEach((cate, index) => {\n                                            new_cate.push(index === 0 ? params.key.toString() : \"0\");\n                                        });\n                                        putMyVar(\"head.cate\", JSON.stringify(new_cate));\n                                        if (params.json.constructor === Object) {\n                                            putMyVar(\"dt_\" + params.json.type, params.json.value);\n                                        } else {\n                                            putMyVar(params.state, params.json);\n                                        }\n                                        refreshPage(true);\n                                        return \"hiker://empty\";\n                                    },\n                                    params),\n                            });\n                        });\n                        items.push({\n                            col_type: \"blank_block\",\n                            extra: {\n                                id: MY_RULE.title + 'cate_line',\n                            }\n                        });\n                    } else {\n                        //å°ç±»\n                        sub_categories.forEach((item, key) => {\n                            var extrapos = false;\n                            /*if (item.includes('type=\"@extra\"')) {\n                              extrapos = true;\n                              //log('é™„åŠ å®šä½')\n                            }*/\n\n                            if (extrapos) {\n                                var title = pdfh(item, \"a&&Text\");\n                                if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                    title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                                }\n                                var json = {\n                                    type: pdfh(item, \"a&&state\"),\n                                    value: pdfh(item, \"a&&value\"),\n                                };\n                            } else {\n                                //var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\n                                var title = item.title;\n                                if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                    title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                                }\n\n                                var json = \"\";\n                                /*switch (true) {\n                                  case åˆ†ç±»é“¾æ¥.includes(\"@@@\"):\n                                    json = {\n                                      type: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@@\")[0]),\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@@\")[1]),\n                                    };\n                                    break;\n                                  case åˆ†ç±»é“¾æ¥.includes(\"@@\"):\n                                    json = {\n                                      type: åˆ†ç±»é“¾æ¥.split(\"@@\")[0],\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@\")[1]),\n                                    };\n                                    break;\n                                  default:\n                                    json = item.url;\n                                    // json = pd(item, åˆ†ç±»é“¾æ¥);\n                                    break;\n                                }*/\n                                json = item.url;\n                                /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\n                                      type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);\n                                  json=åˆ†ç±»é“¾æ¥.includes('@@')?{\n                                      type:åˆ†ç±»é“¾æ¥.split('@@')[0],\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);*/\n                            }\n\n                            let params = {\n                                cate_temp: cate_temp,\n                                index: index,\n                                key: key,\n                                page: page,\n                                json: json,\n                                state: çŠ¶æ€,\n                                allclears: å…¨æ¸…,\n                            };\n                            cates.push({\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\n                                url: $(\"hiker://empty\" + \"#noLoading#\").lazyRule((params) => {\n                                        params.allclears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        clearMyVar('cate_button');\n\n                                        params.cate_temp[params.index] = params.key.toString();\n                                        putMyVar(\"head.cate\", JSON.stringify(params.cate_temp));\n                                        if (params.json.constructor === Object) {\n                                            putMyVar(\"dt_\" + params.json.type, params.json.value);\n                                        } else {\n                                            putMyVar(params.state, params.json);\n                                        }\n                                        refreshPage();\n                                        return \"hiker://empty\";\n                                    },\n                                    params),\n                                col_type: \"scroll_button\",\n                                extra: {\n                                    cls: MY_RULE.title + 'cate_button',\n                                }\n                            });\n                        });\n                        cates.push({\n                            col_type: \"blank_block\",\n                            extra: {\n                                cls: MY_RULE.title + 'cate_button',\n                            }\n                        });\n                    }\n                });\n            }\n            if (fold === \"1\" || æŠ˜å çŠ¶æ€ == false) {\n                items = items.concat(cates);\n            }\n            if (fold === \"0\") {\n                storage0.putMyVar('cate_button', cates)\n            }\n            if (typeof setPreResult != 'undefined') {\n                items = d.concat(items);\n                //æ¸…ç©ºç»§æ‰¿æ•°ç»„\n                d.length = 0;\n                setPreResult(items);\n            } else {\n                items.forEach(item => {\n                    d.push(item);\n                })\n            }\n        },\n    };\n    obj.é¢„è®¾(options);\n    return obj;\n}\n\nvar çŠ¶æ€ =\n    typeof çŠ¶æ€æ ‡è®° != \"undefined\" && çŠ¶æ€æ ‡è®° != \"\" ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\n\nlet dt_debug = false;\n\naddListener(\n    \"onClose\",\n    $.toString(() => {})\n);\n\nvar Create = {\n    nextPage: function() {\n        var result = false;\n        try {\n            var next = eval(ä¸‹ä¸€é¡µ);\n            //log('n:'+next)\n            if (next == \"\") {\n                throw new Error('ä¸‹ä¸€é¡µé“¾æ¥ä¸ºç©º')\n            }\n            result = true;\n            if (true_url == next) {\n                result = false;\n            }\n        } catch (e) {\n            //log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n            log(\"é”™è¯¯ä¿¡æ¯:\" + e.message);\n        }\n        if ((next == \"\" || next == undefined) && page == 1) {\n            next = true_url;\n        } else {\n            //result=false;\n            next = getMyVar(çŠ¶æ€);\n        }\n        //log('l'+true_url)\n        //log('n'+next)\n        if (page != 1) {\n            if (true_url == next && !result) {\n                result = false;\n            } else {\n                result = true;\n            }\n        }\n        return result;\n        //putMyVar(çŠ¶æ€, next);\n    },\n    getBackImage: function(imgurl) {\n        var result = imgurl;\n        try {\n            result = /url(?:\\s+)?\\((.*?)\\)/g\n                .exec(imgurl)[1]\n                .replace(/('|\"|&quot;)/gm, \"\");\n        } catch {}\n        return result;\n    },\n    httpHandle: function(input) {\n        if (input.startsWith(\"http\")) {\n            return input;\n        } else if (input.startsWith(\"//\")) {\n            return \"https:\" + input;\n        } else if (input.startsWith(\"/\")) {\n            return MY_HOME + input;\n        }\n    },\n    imgHandle: function(item, rule) {\n        var img = \"\";\n        if (rule.img.startsWith(\"pd\")) {\n            img = eval(rule.img);\n        } else if (rule.backimg) {\n            img = pdfh(item, rule.img);\n            img = this.getBackImage(img);\n            img = this.httpHandle(img);\n        } else {\n            img = pdfh(item, rule.img);\n            if (!img.startsWith(\"http\")) {\n                img = pd(item, rule.img);\n                img = this.httpHandle(img);\n            }\n        }\n        return img + rule.ref;\n    },\n    urlHandle: function(item, rule) {\n        var href = \"\";\n        if (rule.url.startsWith(\"pd\")) {\n            href = eval(rule.url);\n        } else {\n            href = pd(item, rule.url);\n        }\n        href = rule.imt ? href + \"#immersiveTheme#\" : href;\n        return href;\n    },\n    setContent: function(item, input) {\n        let output = \"\";\n        if (input == undefined) {\n            return output;\n        }\n        if (input.startsWith(\"pd\")) {\n            output = eval(input);\n        } else {\n            output = pdfh(item, input);\n        }\n        return output;\n    },\n    refresh: function() {\n        addListener(\n            \"onRefresh\",\n            $.toString((u) => {\n                clearMyVar(\"yilist\");\n                //var p = storage0.getMyVar('spage', '');\n                //putMyVar(u, p);\n            }, çŠ¶æ€)\n        );\n    },\n    getBooleanValue: function(value, defaultValue) {\n        return value !== undefined ? Boolean(value) : (defaultValue !== undefined ? defaultValue : true);\n    },\n    debuglog: function(i, item, rule, obj) {\n        log('----------' + (i + 1) + ':è°ƒè¯•å¼€å§‹----------');\n        if (item.constructor == Object) {\n            item = JSON.stringify(item);\n        }\n        log('itemå†…å®¹:\\r\\n' + item + '\\r\\n' +\n            `\\n\\ttitleå®šä½:  ${rule.title}  ---> ç»“æœ:  ${obj.title}` +\n            `\\n\\tdescå®šä½:  ${rule.desc}  ---> ç»“æœ:  ${obj.desc}` +\n            `\\n\\timgå®šä½:  ${rule.img}  ---> ç»“æœ:  ${obj.img}` +\n            (rule.content != undefined ? `\\n\\tcontentå®šä½:  ${rule.content}  ---> ç»“æœ:  ${obj.content}` : '') +\n            `\\n\\turlå®šä½:  ${rule.url}  ---> ç»“æœ:  ${obj.url}`\n        );\n        log('----------' + (i + 1) + ':è°ƒè¯•ç»“æŸ----------');\n    },\n    jsonList: function(arr, json, rule) {\n        if (json.constructor != Object) {\n            try {\n                json = JSON.parse(json);\n            } catch {}\n        }\n        if (json[rule.list] == undefined) {\n            arr.push({\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>æ— å†…å®¹</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {},\n            });\n            return;\n        }\n        var debug = this.getBooleanValue(rule.debug, false);\n        var empty = this.getBooleanValue(rule.empty);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        json[rule.list].forEach((item, i) => {\n            var title = eval(rule.title);\n            var desc = eval(rule.desc);\n            var content = eval(rule.content);\n            var img = eval(rule.img) + rule.ref;\n            var href = eval(rule.url);\n            var url = rule.imt ? href + \"#immersiveTheme#\" : href;\n            var lazy = rule.lazy ? rule.lazy : \"\";\n\n            var dd = {\n                title: title,\n                desc: desc,\n                content: content,\n                pic_url: img,\n                url: (empty ? \"hiker://empty##\" : '') + url,\n                col_type: rule.col_type,\n                extra: {\n                    img: img,\n                },\n            };\n\n            if (debug) {\n                var rx = {\n                    title,\n                    desc,\n                    img,\n                    content,\n                    url\n                };\n                this.debuglog(i, item, rule, rx);\n            }\n\n            if (lazy != \"\") {\n                dd[\"url\"] = href + lazy;\n            }\n            arr.push(dd);\n        });\n    },\n    ruleList: function(arr, html, rule) {\n        var list = pdfa(html,\n            rule.list);\n        var debug = this.getBooleanValue(rule.debug,\n            false);\n        var empty = this.getBooleanValue(rule.empty);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        list.forEach((item, i) => {\n            var title = this.setContent(item, rule.title);\n            var desc = this.setContent(item, rule.desc);\n            var img = this.imgHandle(item, rule);\n            var url = this.urlHandle(item, rule);\n            var content = this.setContent(item, rule.content);\n\n            if (debug) {\n                var rx = {\n                    title,\n                    desc,\n                    img,\n                    content,\n                    url\n                };\n                this.debuglog(i, item, rule, rx);\n            }\n\n            var lazy = rule.lazy ? rule.lazy : \"\";\n            var dd = {\n                title: title,\n                desc: desc,\n                pic_url: img,\n                url: (empty ? \"hiker://empty##\" : '') + url,\n                content: content,\n                col_type: rule.col_type,\n                extra: {\n                    img: img,\n                },\n            };\n            if (lazy != \"\") {\n                dd[\"url\"] = url + lazy;\n            }\n            arr.push(dd);\n        });\n    },\n    List: function(arr, html, rule, param) {\n        param = param ? param : {};\n        var auto = param.auto ? param.auto : false;\n        var show = param.show ? param.show : false;\n        if (page == 1) {\n            //this.spage.set(true_url);\n        }\n        this.refresh();\n        var debug = this.getBooleanValue(rule.debug, false);\n        var empty = this.getBooleanValue(rule.empty);\n        var list = pdfa(html, rule.list);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        //log(this.nextPage())\n        if ((storage0.getMyVar('yi_isnext', 't') == 't' && list.length > 0) || page == 1) {\n            list.forEach((item, i) => {\n                deleteItem(\"pagenum\");\n                deleteItem(\"pageline\");\n                var id = \"\";\n                var cls = \"\";\n                var title = this.setContent(item, rule.title);\n                var desc = this.setContent(item, rule.desc);\n                var desc1 = this.setContent(item, rule.desc1);\n                var img = this.imgHandle(item, rule);\n                var url = this.urlHandle(item, rule);\n                var content = this.setContent(item, rule.content);\n\n                if (debug) {\n                    var rx = {\n                        title,\n                        desc,\n                        img,\n                        content,\n                        url\n                    };\n                    this.debuglog(i, item, rule, rx);\n                }\n\n                if (i == list.length - 1) {\n                    id = \"lastid_\" + page;\n                    cls = \"lastmark\";\n                }\n                d.push({\n                    title: title,\n                    desc: desc + '\\t\\t\\té˜…è¯»æ•°ï¼š' + desc1,\n                    pic_url: img,\n                    url: (empty ? \"hiker://empty##\" : '') + url,\n                    content: content,\n                    col_type: rule.col_type,\n                    extra: {\n                        img: img,\n                        id: id,\n                        cls: cls,\n                    },\n                });\n                if (i == list.length - 1 && show) {\n                    d.push({\n                        col_type: \"line\",\n                        extra: {\n                            id: \"pageline\",\n                        },\n                    });\n\n                    d.push({\n                        title: \"â€œâ€œâ€â€<small>åŠ è½½ä¸­...</small>\",\n                        url: \"hiker://empty\",\n                        col_type: \"text_center_1\",\n                        extra: {\n                            id: \"pagenum\",\n                        },\n                    });\n                }\n            });\n        } else {\n            updateItem(\"pagenum\", {\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>åˆ°åº•äº†</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {\n                    id: \"last\",\n                },\n            });\n        }\n        if (list.length == 0 && page == 1) {\n            d.push({\n                col_type: \"line\",\n            });\n            d.push({\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>æ— å†…å®¹</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {},\n            });\n        }\n        if (this.nextPage()) {\n            //log('t');\n            storage0.putMyVar('yi_isnext', 't');\n        } else {\n            //log('f');\n            storage0.putMyVar('yi_isnext', 'f');\n        }\n        if (auto) {\n            //createNextPage();\n            autoPage();\n        }\n    },\n};\n\nvar extMethod = {\n    ToParams: function() {\n        var json = arguments[0];\n        return Object.keys(json)\n            .map((key) => key + \"=\" + json[key])\n            .join(\"&\");\n    },\n    urlParse: function(u) {\n        var dict = {};\n        dict.Source = u;\n        let params = (url) => {\n            let queryParams = {};\n            let reg = /([^?=&]+)=([^?=&]+)/g;\n            url.replace(reg, function() {\n                queryParams[arguments[1]] = arguments[2];\n            });\n            return queryParams;\n        };\n        var javaUrl = JavaImporter(java.net.URL);\n        with(javaUrl) {\n            var url = new URL(u);\n            dict.Protocol = url.getProtocol();\n            dict.Host = url.getHost();\n            dict.Port = url.getPort();\n            dict.File = url.getFile();\n            dict.Path = url.getPath();\n            dict.Ref = url.getRef();\n            dict.Hosts = `${dict.Protocol}://${url.getHost()}`;\n        }\n        dict.Params = params(u);\n        return dict;\n    },\n    isEqual: function(x, y) {\n        const ok = Object.keys,\n            tx = typeof x,\n            ty = typeof y;\n        return x && y && tx === \"object\" && tx === ty ?\n            ok(x).length === ok(y).length &&\n            ok(x).every((key) => this.isEqual(x[key], y[key])) : x === y;\n    },\n    findDifferentIndex: function(str1, str2) {\n        const diffChars = [];\n        for (let i = 0; i < str2.length; i++) {\n            if (str1[i] !== str2[i]) {\n                diffChars.push({\n                    index: i,\n                    s1: str1[i],\n                    s2: str2[i],\n                });\n            }\n        }\n        return diffChars;\n    },\n    replaceCharAt: function(str, index, replacement) {\n        if (index < 0 || index >= str.length) {\n            return str;\n        }\n        //log(index)\n        const arr = str.split(\"\");\n        arr[index] = replacement;\n        return arr.join(\"\");\n    },\n    getObjectKeysDiff: function(obj1, obj2) {\n        const differentKeys = [];\n        for (let key in obj1) {\n            if (!obj2.hasOwnProperty(key) || obj1[key] !== obj2[key]) {\n                differentKeys.push(key);\n            }\n        }\n        for (let key in obj2) {\n            if (!obj1.hasOwnProperty(key)) {\n                differentKeys.push(key);\n            }\n        }\n        return differentKeys;\n    },\n    getNextUrl: function(source, target, params) {\n        var u1 = this.urlParse(source);\n        var u2 = this.urlParse(target);\n        var pa = undefined;\n        if (typeof params == \"object\") {\n            pa = params.hasOwnProperty(\"ç‰¹å¾\") ? params.ç‰¹å¾ : undefined;\n        }\n        var nexturl = source;\n        var ca = Object.keys(u2.Params).length == 0 ? \"\" : \"?\";\n        if (pa != undefined) {\n            var rs = String(u2.Path).replace(new RegExp(pa), \"$1fypage\");\n            nexturl = u2.Hosts + rs + ca + this.ToParams(u2.Params);\n        } else {\n            if (this.isEqual(u1.Params, u2.Params)) {\n                if (dt_debug) {\n                    log(u1.Path);\n                    log(u2.Path);\n                }\n                var df = this.findDifferentIndex(String(u1.Path), String(u2.Path));\n                if (dt_debug) {\n                    log(df);\n                }\n                if (df.length == 1) {\n                    var re = df[0].index;\n                } else {\n                    var f = df.filter((x) => /\\d+/.test(x.s2));\n                    var re = f[0].index;\n                }\n                var eq = this.replaceCharAt(String(u2.Path), re, \"fypage\");\n                nexturl = u2.Hosts + eq + ca + this.ToParams(u2.Params);\n            } else {\n                var ep = this.getObjectKeysDiff(u1.Params, u2.Params)\n                if (ep.length == 1) {\n                    u1.Params[ep[0]] = 'fypage'\n                } else {\n                    log(ep);\n                }\n                var eq = String(u1.Path).replace(/\\d+/, \"fypage\");\n                nexturl = u1.Hosts + eq + ca + this.ToParams(u1.Params);\n            }\n        }\n        //log('next:'+nexturl)\n        return nexturl;\n    },\n};\n\nfunction getTruelink(mark, url, page) {\n    var p = getMyVar(mark, url).replace(\"fypage\", page);\n    if (page == 1) {\n        return getMyVar(\"yi_firstpage\", p);\n    } else if (p != \"\") {\n        return p;\n    } else {\n        return url;\n    }\n}\n//æ„å»º\nfunction createNextPage() {\n    let startnum = 1;\n    var obj = arguments[0];\n    if (true_url != getMyVar(\"yi_pageurl\", \"\")) {\n        clearMyVar(\"yi_pageurl\");\n    }\n    if (page == startnum && getMyVar(\"yi_pageurl\") == \"\") {\n        putMyVar(\"yi_firstpage\", true_url);\n        try {\n            var next = eval(ä¸‹ä¸€é¡µ);\n            //log(\"next\");\n            //log(next);\n        } catch {\n            log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n            next = \"\";\n        }\n        if (next != \"\") {\n            var nxurl = extMethod.getNextUrl(true_url, next, obj);\n            //log(\"nxurl:\" + nxurl);\n            putMyVar(çŠ¶æ€, nxurl);\n            putMyVar(\"yi_pageurl\", nxurl);\n        }\n    }\n}\n\nfunction autoPage() {\n    if (page == 1) {\n        putMyVar(\"yi_firstpage\", true_url);\n    }\n    try {\n        var next = eval(ä¸‹ä¸€é¡µ);\n        //log(\"next\");\n        //log('next:'+next);\n    } catch {\n        log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n        next = \"\";\n    }\n    if (next != \"\") {\n        putMyVar(çŠ¶æ€, next);\n    }\n}"},{"col_type":"movie_3","name":"è§£æ","path":"lazy","rule":"var lazy = $('').lazyRule((MY_HOME,rule) => { \n        return \"hiker://page/aliyun?rule=äº‘ç›˜å›.ç®€&page=fypage&realurl=\" + encodeURIComponent(input);\n}, MY_HOME, MY_RULE.title)"},{"col_type":"movie_3","name":"ç¯å¢ƒ","path":"repair","rule":"js:\nvar document = {};\nvar window = {\n    location: {\n        reload: function() {\n            return;\n        }\n    }\n};\n\n// å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç”¨äºå­˜å‚¨ cookie åç§°å’Œå€¼çš„é”®å€¼å¯¹\nvar cookies = {};\nObject.defineProperty(document, 'cookie', {\n    enumerable: true,\n    configurable: true,\n    get: function() {\n        return Object.entries(cookies).map(([key, value]) => `${key}=${value}`).join('; ');\n    },\n    set: function(value) {\n        var list = [];\n        if (value.includes(';')) {\n            list = value.split(';');\n        } else {\n            list = [value];\n        }\n        list.forEach(x => {\n            var index = x.indexOf(\"=\");\n            var key = x.substring(0, index).trim();\n            var value = x.substring(index + 1);\n            cookies[key] = value;\n        })\n    }\n});\n\nfunction guard(url, headobj) {\n    var head = headobj ? headobj:{\n        headers: {\n            Cookie: getCookie(url),\n        }\n    }\n    var html = fetchCodeByWebView(url, head);\n    if (html.includes('_guard/auto.js')) {\n        document[\"cookie\"] = getCookie(url);\n        eval(fetch(getHome(url) + '/_guard/auto.js'))\n        html = fetch(url, {\n            headers: {\n                Cookie: document[\"cookie\"],\n            }\n        });\n    }\n    //log(document[\"cookie\"])\n    return html\n}"}],"title":"é¸­å…ˆçŸ¥","author":"R","version":20231112,"type":"video","url":"hiker://empty##https://www.yxzhi.com/android##fypage","col_type":"movie_1_left_pic","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\neval(JSON.parse(request('hiker://page/repair')).rule);\n\naddListener(\"onClose\", $.toString(() => {\n    let keys = listMyVarKeys();\n    for (let it of keys) {\n        clearMyVar(it);\n    }\n}));\nvar getRangeColors = function() {Â Â Â Â Â Â Â \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);Â Â Â Â Â \n}\nconst ä¸‹ä¸€é¡µ = \"pd(html, 'a:matches(ä¸‹ä¸€é¡µ)&&href')\";\nconst page = MY_PAGE;\neval(JSON.parse(request('hiker://page/yi')).rule)\n\nvar å®šä½ä¿¡æ¯ = [{\n    å¤§ç±»å®šä½: '.primary-menu&&li,42:45',\n    å°ç±»: 'body&&a:not(:matches(é¦–é¡µ|èµ„è®¯|APP|ä¸“é¢˜|ç¤¾ç¾¤|çƒ­æœ|ç•™è¨€|ç¦åˆ©))',\n    é“¾æ¥å¤„ç†: (u) => {\n        let url = u.replace(/type(\\/\\d+)\\.html/, 'show$1-----------.html');\n        return url\n    }\n},{\n    ä¸€çº§å®šä½: '.primary-menu&&li:has(li:nth-child(n+2)),0:3',\n}]\n\n\nMY_URL = MY_URL.replace('hiker://empty##', '')\nlet true_url = getTruelink(MY_RULE.url, MY_URL, page);\nMY_URL=true_url;\nlog(true_url)\nvar html = guard(MY_URL);\n//var html = fetchCodeByWebView(true_url)\nconst dc = dynamicClass({\n    åˆ†ç±»é¢œè‰²: getRangeColors()\n});\ndc.å¼€å¯æŠ˜å (false)\ndc.å¼€å¯æœç´¢()\ndc.åˆ›å»ºåŠ¨æ€åˆ†ç±»(å®šä½ä¿¡æ¯)\n\n\nvar parseRule = {\n    list: 'body&&.post-loop&&.item', //ç»Ÿä¸€item\n    title: 'a&&title||Text',\n    desc: '.date&&Text',\n    desc1: '.views&&Text',\n    img: 'img||a&&data-src||data-original',\n    url: 'a&&href',\n    ref: '@Referer=',\n    imt: false,\n    //backimg: true,\n}\n\nCreate.List(d, html, parseRule);\nautoPage();\n\n\nsetResult(d)","searchFind":"js:\nvar d = [];\nvar html = getResCode();\nvar list = pdfa(html, 'body&&.post-loop&&.item');\nlist.forEach(x => {   \n    d.push({\n       title: pdfh(x, 'a&&title'),\n       desc: pdfh(x,'.item-meta&&Text'),\n       img: pd(x,'img&&data-original'),\n       url: pd(x, 'a&&href'),\n  });\n})\nsetResult(d)","search_url":"https://www.yxzhi.com/page/fypage?s=**","group":"0ï¸âƒ£å¸¸ç”¨","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = []\nMY_URL=MY_URL.replace('hiker://empty##','');\nvar html = fetch(MY_URL);\n\neval(JSON.parse(fetch('hiker://page/lazy', {})).rule);\n\nvar title = pdfh(html,'.entry-head&&h1&&Text');\nvar desc = pdfh(html,'body&&.entry-head&&.entry-info&&Text');\n   if(title !==null){\n    d.push({\n        title: 'â€œâ€œâ€â€<middle><font color=#FFA500>'+title+'</font></middle>',\n        desc: desc,\n        url: MY_URL,\n        col_type: 'text_1',\n        extra: {lineVisible: false}\n    })\n}\n\nvar content = pdfh(html,'body&&.entry-content&&p&&Text');\n    d.push({\n        title: '<middle><font color=#008B8B>'+content+'</font></middle>',\n        desc: desc,\n        url: MY_URL,\n        col_type: 'rich_text',\n        extra: {lineVisible: false}\n    })\n\nvar img = pd(html,'body&&.entry-content&&.wp-block-image&&img&&src');\n    if(img !==null){\n        d.push({\n             img: img,\n             url: 'hiker://empty',\n             col_type: 'pic_1_full',\n                  });\n         }\n\nd.push({\n    title: '<span style=\"color:#ff6600\"><b>ğŸ”¥æ¸¸å®¢ä¸‹è½½...\\t\\t\\t</b></span>',\n    url: \"hiker://empty\",\n    col_type: 'rich_text'\n});\n\nd.push({\n    title: 'â€œâ€œâ€â€<middle><font color=#FF00FF>é˜¿é‡Œäº‘</font></middle>',\n    desc: pdfh(html,'body&&.entry-content&&a:matches(ali|é˜¿é‡Œ)&&href'),\n    url: pdfh(html,'body&&.entry-content&&a:matches(ali|é˜¿é‡Œ)&&href') + lazy,\n    pic_url: 'https://ghproxy.com/https://raw.githubusercontent.com/ls125781003/tubiao/main/system/12.png',\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n\nd.push({\n   col_type: 'big_big_blank_block'\n})\n\nsetResult(d)","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"ä¸€çº§\",\"path\":\"yi\",\"rule\":\"js:\\n/*\\nby Î±(zetalpha)\\nä¸€çº§å°è£…\\nåŠ¨æ€åˆ†ç±» åˆ—è¡¨åˆ›å»º è‡ªåŠ¨ä¸‹ä¸€é¡µ\\nver 20231017 1.0\\n*/\\n\\n//éšæœºé¢œè‰²\\nvar getRangeColors = function() {\\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);\\n}\\n\\n//åŠ¨æ€åˆ†ç±»\\nfunction dynamicClass(options) {\\n    const obj = {\\n        //é»˜è®¤å€¼\\n        layout: \\\"undefined\\\",\\n        html: \\\"empty\\\",\\n        page: 0,\\n        åˆ†ç±»é¢œè‰²: \\\"#FA7298\\\",\\n        æŠ˜å : \\\"â€œâ€œâ€â€<b>\\\" + \\\"âˆ§\\\".fontcolor(\\\"#1aad19\\\") + \\\"</b>\\\",\\n        å±•å¼€: \\\"â€œâ€œâ€â€<b>\\\" + \\\"âˆ¨\\\".fontcolor(\\\"#FF0000\\\") + \\\"</b>\\\",\\n        open: true,\\n        state: MY_RULE.url,\\n        search: false,\\n        clears: [],\\n        clearall: [\\\"yi_firstpage\\\"],\\n        debug: false,\\n\\n        é¢„è®¾(param) {\\n            if (param == undefined) {\\n                param = [];\\n            }\\n            Object.keys(param).forEach((property) => {\\n                // å¯¹æ¯ä¸ªå±æ€§åæ‰§è¡Œæ“ä½œ\\n                const value = param[property]; // è·å–å±æ€§å€¼\\n                // åœ¨è¿™é‡Œæ‰§è¡Œæ‚¨çš„æ“ä½œ\\n                this[property] = value;\\n                if (this.debug) {\\n                    console.log(property + \\\":\\\" + value);\\n                }\\n            });\\n        },\\n        evalJSRule(item,\\n            jsRule) {\\n            let rule = jsRule.replace(\\\"@js:\\\",\\n                \\\"\\\");\\n            rule = rule.trim();\\n            //log($.stringify(rule))\\n            let input = item;\\n            if (rule.startsWith(\\\"(\\\")) {\\n                eval(\\\"result = \\\" + rule);\\n            } else {\\n                /**\\n                 * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\\n                 */\\n                eval(\\\"result = \\\" + \\\"(() => {\\\" + rule + \\\"})()\\\");\\n            }\\n            return result || \\\"\\\";\\n        },\\n        getTitle(src, category) {\\n            let title = \\\"\\\";\\n            let titleRule = category || \\\"a&&Text\\\";\\n            if (titleRule.startsWith(\\\"@js:\\\")) {\\n                title = this.evalJSRule(src, titleRule);\\n            } else {\\n                title = parseDomForHtml(src, titleRule);\\n            }\\n            return title || \\\"\\\";\\n        },\\n        getUrl(src, category) {\\n            let url = \\\"\\\";\\n            let urlRule = category.é“¾æ¥ || \\\"a&&href\\\";\\n            if (urlRule.startsWith(\\\"@js:\\\")) {\\n                url = this.evalJSRule(src, urlRule);\\n            } else {\\n                url = pd(src, urlRule);\\n            }\\n            if (typeof category.é“¾æ¥å¤„ç† == \\\"function\\\") {\\n                url = category.é“¾æ¥å¤„ç†(url);\\n            }\\n            return url || \\\"\\\";\\n        },\\n        isNull(param) {\\n            if (param == null) {\\n                return this;\\n            }\\n            return false;\\n        },\\n        isBoolean(variable) {\\n            if (typeof variable !== \\\"boolean\\\") {\\n                throw new Error(\\\"å¼€å¯æŠ˜å è¯·ä¼ å…¥å¸ƒå°”å€¼\\\");\\n            }\\n        },\\n        æ¸…é™¤(list) {\\n            if (this.isNull(list)) {\\n                return this;\\n            }\\n            if (list.constructor == String) {\\n                throw new Error(\\\"æ¸…é™¤æŠ¥é”™:è¯·ä¼ åˆ—è¡¨\\\");\\n            }\\n            this.clears = list;\\n            return this;\\n        },\\n        å…¨æ¸…(list) {\\n            if (this.isNull(list)) {\\n                return this;\\n            }\\n            var c = this.clearall;\\n            list = c.concat(list);\\n            this.clearall = list;\\n            return this;\\n        },\\n        æºç (input) {\\n            this.html = input;\\n            return this;\\n        },\\n        ç•Œé¢(input) {\\n            this.layout = input;\\n            return this;\\n        },\\n        é¡µç (input) {\\n            this.page = input;\\n            return this;\\n        },\\n        çŠ¶æ€(input) {\\n            this.state = input;\\n            return this;\\n        },\\n        å¼€å¯æœç´¢(input) {\\n            if (input == undefined) {\\n                input = true;\\n            }\\n            this.search = input;\\n            return this;\\n        },\\n        å¼€å¯æŠ˜å (input) {\\n            if (input == undefined) {\\n                input = true;\\n            }\\n            this.isBoolean(input);\\n            this.open = input;\\n            return this;\\n        },\\n        setTitle(k, i, t) {\\n            return k == i ? \\\"â€œâ€œâ€â€\\\" + t.fontcolor(this.åˆ†ç±»é¢œè‰²) : t;\\n        },\\n        action(obj) {\\n            return [{\\n                title: \\\"æ¸…é™¤çŠ¶æ€\\\",\\n                js: $.toString((obj) => {\\n                    log(obj);\\n                    clearMyVar(obj.state);\\n                    clearMyVar(\\\"head.cate\\\");\\n                    clearMyVar('cate_button');\\n                    obj.all.forEach((item) => {\\n                        clearMyVar(item);\\n                    });\\n                    obj.cl.forEach((item) => {\\n                        clearMyVar(item);\\n                    });\\n                    refreshPage();\\n                }, obj),\\n            }, ];\\n        },\\n        checkParam() {\\n            var obj = {};\\n            if (this.page == 0 && typeof page == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥é¡µç \\\");\\n            } else {\\n                if (typeof page == \\\"undefined\\\") {\\n                    obj[\\\"é¡µç \\\"] = this.page;\\n                } else {\\n                    obj[\\\"é¡µç \\\"] = page;\\n                }\\n            }\\n            if (this.html == \\\"empty\\\" && typeof html == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥æºç \\\");\\n            } else {\\n                if (typeof html == \\\"undefined\\\") {\\n                    obj[\\\"æºç \\\"] = this.html;\\n                } else {\\n                    obj[\\\"æºç \\\"] = html;\\n                }\\n            }\\n            if (this.layout == \\\"undefined\\\" && typeof d == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥ç•Œé¢\\\");\\n            } else {\\n                if (typeof d == \\\"undefined\\\") {\\n                    obj[\\\"ç•Œé¢\\\"] = this.layout;\\n                } else {\\n                    obj[\\\"ç•Œé¢\\\"] = d;\\n                }\\n            }\\n            return obj;\\n        },\\n        åˆ›å»ºåŠ¨æ€åˆ†ç±»(ruleObj) {\\n            let items = [];\\n            let cates = [];\\n            if (ruleObj == undefined) {\\n                ruleObj = [];\\n            }\\n            //åˆå§‹åŒ–å˜é‡å¼€å§‹\\n            const param = this.checkParam();\\n            const page = param.é¡µç ;\\n            const html = param.æºç ;\\n            const d = param.ç•Œé¢;\\n            const çŠ¶æ€ = this.state;\\n            const search = this.search;\\n            const empty = \\\"hiker://empty\\\";\\n            const æŠ˜å çŠ¶æ€ = this.open;\\n            var å±•å¼€ = this.å±•å¼€;\\n            var æŠ˜å  = this.æŠ˜å ;\\n            var å…¨æ¸… = this.clearall;\\n            var æ¸…é™¤ = this.clears;\\n            //åˆå§‹åŒ–å˜é‡ç»“æŸ\\n            let init_cate = new Array(20).fill(\\\"0\\\");\\n            const fold = getMyVar(MY_RULE.group, \\\"0\\\");\\n            const cate_temp = JSON.parse(\\n                getMyVar(\\\"head.cate\\\", JSON.stringify(init_cate))\\n            );\\n            if (search && page == 1) {\\n                items.push({\\n                    title: \\\"\\\",\\n                    url: \\\"'hiker://search?rule=\\\" + MY_RULE.title + \\\"&s='+input\\\",\\n                    desc: \\\"æœç´¢å…³é”®è¯\\\",\\n                    col_type: \\\"input\\\",\\n                    extra: {\\n                        defaultValue: getMyVar(\\\"keyword\\\", \\\"\\\"),\\n                        onChange: $.toString(() => {\\n                            putMyVar(\\\"keyword\\\", input);\\n                        }),\\n                    },\\n                });\\n            }\\n            const categories = [];\\n            ruleObj.forEach((x) => {\\n                var list = [];\\n                //log(x)\\n                if (x.json != undefined) {\\n                    x.json.map(k => {\\n                        categories.push(JSON.stringify(k).replace(/^\\\\[|\\\\]$/g, ''))\\n                    })\\n                    //categories.push(x.json)\\n                }\\n                if (x.ä¸€çº§å®šä½) {\\n                    if (x.ä¸€çº§å®šä½.startsWith(\\\"@js:\\\")) {\\n                        list = this.evalJSRule(html, x.ä¸€çº§å®šä½);\\n                    } else {\\n                        list = pdfa(html, x.ä¸€çº§å®šä½);\\n                    }\\n                }\\n                if (x.å¤§ç±»å®šä½) {\\n                    if (x.å¤§ç±»å®šä½.startsWith(\\\"@js:\\\")) {\\n                        list = this.evalJSRule(html, x.å¤§ç±»å®šä½);\\n                    } else {\\n                        list = [pdfa(html, x.å¤§ç±»å®šä½).join('\\\\n')];\\n                    }\\n                }\\n                //--é¢å¤–å¤„ç†--\\n                if (('å¢åŠ ' in x)) {\\n                    if (x.å¢åŠ .constructor == String) {\\n                        x.å¢åŠ  = eval(x.å¢åŠ );\\n                    }\\n                    slist = x.å¢åŠ .concat(slist);\\n                }\\n                if (('è¡¥å……' in x)) {\\n                    if (x.è¡¥å…….constructor == String) {\\n                        x.è¡¥å…… = eval(x.è¡¥å……);\\n                    }\\n                    slist = slist.concat(x.è¡¥å……);\\n                }\\n                //--é¢å¤–å¤„ç†--\\n                var ä¸€çº§ = list.map((s) => {\\n                    var slist = [];\\n                    if (!(\\\"å°ç±»\\\" in x)) {\\n                        x.å°ç±» = \\\"body&&a:not(:matches(é¦–é¡µ)):not(a:not([href]))\\\";\\n                    }\\n                    if (x.å°ç±».startsWith(\\\"@js:\\\")) {\\n                        slist = this.evalJSRule(s, x.å°ç±»);\\n                    } else {\\n                        slist = pdfa(s, x.å°ç±»);\\n                    }\\n                    var å®šä½ = slist.map((item) => {\\n                        var title = this.getTitle(item, x.æ ‡é¢˜);\\n                        var url = this.getUrl(item, x);\\n                        var obj = {\\n                            title: title,\\n                            url: url\\n                        };\\n                        return JSON.stringify(obj);\\n                    });\\n                    return å®šä½;\\n                });\\n                //log(ä¸€çº§)\\n                //log(ä¸€çº§.length)\\n                if (ä¸€çº§.length == 1) {\\n                    categories.push(ä¸€çº§.join(\\\"\\\\n\\\"));\\n                } else {\\n                    ä¸€çº§.forEach((item) => {\\n                        categories.push(item.join(\\\",\\\"));\\n                    });\\n                }\\n                //log(categories)\\n            });\\n            if (æŠ˜å çŠ¶æ€) {\\n                if (page == 1) {\\n                    items.push({\\n                        title: fold === \\\"1\\\" ? æŠ˜å  : å±•å¼€,\\n                        url: $(\\\"#noLoading#\\\").lazyRule(\\n                            (title, fold, u, all, exps) => {\\n                                var fold = getMyVar(MY_RULE.group, fold);\\n\\n                                var [å±•å¼€, æŠ˜å ] = exps;\\n\\n                                if (fold == 1) {\\n                                    var cx = findItemsByCls(title + 'cate_button');\\n                                    storage0.putMyVar('cate_button', cx);\\n                                    deleteItemByCls(title + 'cate_button');\\n\\n                                } else {\\n                                    var cx = storage0.getMyVar('cate_button', []).map(x => {\\n                                        x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\\n                                        return x;\\n                                    });\\n                                    addItemAfter(title + 'cate_line', cx)\\n                                }\\n\\n                                /*all.forEach((item) => {\\n                                  clearMyVar(item);\\n                                });*/\\n                                updateItem(title + 'cate_exp', {\\n                                    title: fold == 1 ? å±•å¼€ : æŠ˜å ,\\n                                })\\n\\n                                putMyVar(MY_RULE.group, fold === \\\"1\\\" ? \\\"0\\\" : \\\"1\\\");\\n\\n                                //refreshPage(false);\\n                                return \\\"hiker://empty\\\";\\n                            },\\n                            MY_RULE.title,\\n                            fold,\\n                            çŠ¶æ€,\\n                            å…¨æ¸…, [å±•å¼€,\\n                                æŠ˜å \\n                            ],\\n                        ),\\n                        col_type: \\\"scroll_button\\\",\\n                        extra: {\\n                            id: MY_RULE.title + 'cate_exp',\\n                            longClick: this.action({\\n                                state: çŠ¶æ€,\\n                                all: å…¨æ¸…,\\n                                cl: æ¸…é™¤,\\n                            }),\\n                        },\\n                    });\\n                }\\n            }\\n            if (page == 1) {\\n                categories.forEach((category, index) => {\\n                    //log(category)\\n                    let sub_categories = [];\\n                    /*if (å°ç±»å®šä½.includes(\\\";\\\")) {\\n                      sub_categories = pdfa(category, å°ç±»å®šä½.split(\\\";\\\")[0]);\\n                      if (sub_categories.length == 0) {\\n                        sub_categories = pdfa(category, å°ç±»å®šä½.split(\\\";\\\")[1]);\\n                      }\\n                    } else {*/\\n                    //log(index)\\n                    sub_categories = JSON.parse(`[${category}]`);\\n                    //log(sub_categories)\\n                    // sub_categories = pdfa(category, å°ç±»å®šä½);\\n                    //}\\n                    if (index === 0) {\\n                        //å¤§ç±»\\n                        sub_categories.forEach((item, key) => {\\n\\n                            //let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\\n                            let title = item.title;\\n\\n                            if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                title = title.replace(newRegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                            }\\n                            let json = ''\\n                            json = item.url;\\n\\n                            let params = {\\n                                cate_temp: cate_temp,\\n                                key: key,\\n                                page: page,\\n                                clears: æ¸…é™¤,\\n                                json: json,\\n                                state: çŠ¶æ€,\\n                                allclears: å…¨æ¸…,\\n                            };\\n\\n                            //let url = pd(item, _å¤§ç±»é“¾æ¥);\\n                            let url = item.url;\\n                            /*if (å¤§ç±»å¤„ç†) {\\n                              url = ä¸€çº§åˆ†ç±»å¤„ç†(url);\\n                            }*/\\n                            //log(url)\\n                            items.push({\\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\\n                                col_type: \\\"scroll_button\\\",\\n                                url: $(\\\"hiker://empty#noLoading#\\\").lazyRule((params) => {\\n                                        let new_cate = [];\\n                                        params.clears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        params.allclears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        clearMyVar('cate_button');\\n\\n                                        params.cate_temp.forEach((cate, index) => {\\n                                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\");\\n                                        });\\n                                        putMyVar(\\\"head.cate\\\", JSON.stringify(new_cate));\\n                                        if (params.json.constructor === Object) {\\n                                            putMyVar(\\\"dt_\\\" + params.json.type, params.json.value);\\n                                        } else {\\n                                            putMyVar(params.state, params.json);\\n                                        }\\n                                        refreshPage(true);\\n                                        return \\\"hiker://empty\\\";\\n                                    },\\n                                    params),\\n                            });\\n                        });\\n                        items.push({\\n                            col_type: \\\"blank_block\\\",\\n                            extra: {\\n                                id: MY_RULE.title + 'cate_line',\\n                            }\\n                        });\\n                    } else {\\n                        //å°ç±»\\n                        sub_categories.forEach((item, key) => {\\n                            var extrapos = false;\\n                            /*if (item.includes('type=\\\"@extra\\\"')) {\\n                              extrapos = true;\\n                              //log('é™„åŠ å®šä½')\\n                            }*/\\n\\n                            if (extrapos) {\\n                                var title = pdfh(item, \\\"a&&Text\\\");\\n                                if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                    title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                                }\\n                                var json = {\\n                                    type: pdfh(item, \\\"a&&state\\\"),\\n                                    value: pdfh(item, \\\"a&&value\\\"),\\n                                };\\n                            } else {\\n                                //var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\\n                                var title = item.title;\\n                                if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                    title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                                }\\n\\n                                var json = \\\"\\\";\\n                                /*switch (true) {\\n                                  case åˆ†ç±»é“¾æ¥.includes(\\\"@@@\\\"):\\n                                    json = {\\n                                      type: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@@\\\")[0]),\\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@@\\\")[1]),\\n                                    };\\n                                    break;\\n                                  case åˆ†ç±»é“¾æ¥.includes(\\\"@@\\\"):\\n                                    json = {\\n                                      type: åˆ†ç±»é“¾æ¥.split(\\\"@@\\\")[0],\\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@\\\")[1]),\\n                                    };\\n                                    break;\\n                                  default:\\n                                    json = item.url;\\n                                    // json = pd(item, åˆ†ç±»é“¾æ¥);\\n                                    break;\\n                                }*/\\n                                json = item.url;\\n                                /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\\n                                      type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);\\n                                  json=åˆ†ç±»é“¾æ¥.includes('@@')?{\\n                                      type:åˆ†ç±»é“¾æ¥.split('@@')[0],\\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);*/\\n                            }\\n\\n                            let params = {\\n                                cate_temp: cate_temp,\\n                                index: index,\\n                                key: key,\\n                                page: page,\\n                                json: json,\\n                                state: çŠ¶æ€,\\n                                allclears: å…¨æ¸…,\\n                            };\\n                            cates.push({\\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\\n                                url: $(\\\"hiker://empty\\\" + \\\"#noLoading#\\\").lazyRule((params) => {\\n                                        params.allclears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        clearMyVar('cate_button');\\n\\n                                        params.cate_temp[params.index] = params.key.toString();\\n                                        putMyVar(\\\"head.cate\\\", JSON.stringify(params.cate_temp));\\n                                        if (params.json.constructor === Object) {\\n                                            putMyVar(\\\"dt_\\\" + params.json.type, params.json.value);\\n                                        } else {\\n                                            putMyVar(params.state, params.json);\\n                                        }\\n                                        refreshPage();\\n                                        return \\\"hiker://empty\\\";\\n                                    },\\n                                    params),\\n                                col_type: \\\"scroll_button\\\",\\n                                extra: {\\n                                    cls: MY_RULE.title + 'cate_button',\\n                                }\\n                            });\\n                        });\\n                        cates.push({\\n                            col_type: \\\"blank_block\\\",\\n                            extra: {\\n                                cls: MY_RULE.title + 'cate_button',\\n                            }\\n                        });\\n                    }\\n                });\\n            }\\n            if (fold === \\\"1\\\" || æŠ˜å çŠ¶æ€ == false) {\\n                items = items.concat(cates);\\n            }\\n            if (fold === \\\"0\\\") {\\n                storage0.putMyVar('cate_button', cates)\\n            }\\n            if (typeof setPreResult != 'undefined') {\\n                items = d.concat(items);\\n                //æ¸…ç©ºç»§æ‰¿æ•°ç»„\\n                d.length = 0;\\n                setPreResult(items);\\n            } else {\\n                items.forEach(item => {\\n                    d.push(item);\\n                })\\n            }\\n        },\\n    };\\n    obj.é¢„è®¾(options);\\n    return obj;\\n}\\n\\nvar çŠ¶æ€ =\\n    typeof çŠ¶æ€æ ‡è®° != \\\"undefined\\\" && çŠ¶æ€æ ‡è®° != \\\"\\\" ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\\n\\nlet dt_debug = false;\\n\\naddListener(\\n    \\\"onClose\\\",\\n    $.toString(() => {})\\n);\\n\\nvar Create = {\\n    nextPage: function() {\\n        var result = false;\\n        try {\\n            var next = eval(ä¸‹ä¸€é¡µ);\\n            //log('n:'+next)\\n            if (next == \\\"\\\") {\\n                throw new Error('ä¸‹ä¸€é¡µé“¾æ¥ä¸ºç©º')\\n            }\\n            result = true;\\n            if (true_url == next) {\\n                result = false;\\n            }\\n        } catch (e) {\\n            //log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n            log(\\\"é”™è¯¯ä¿¡æ¯:\\\" + e.message);\\n        }\\n        if ((next == \\\"\\\" || next == undefined) && page == 1) {\\n            next = true_url;\\n        } else {\\n            //result=false;\\n            next = getMyVar(çŠ¶æ€);\\n        }\\n        //log('l'+true_url)\\n        //log('n'+next)\\n        if (page != 1) {\\n            if (true_url == next && !result) {\\n                result = false;\\n            } else {\\n                result = true;\\n            }\\n        }\\n        return result;\\n        //putMyVar(çŠ¶æ€, next);\\n    },\\n    getBackImage: function(imgurl) {\\n        var result = imgurl;\\n        try {\\n            result = /url(?:\\\\s+)?\\\\((.*?)\\\\)/g\\n                .exec(imgurl)[1]\\n                .replace(/('|\\\"|&quot;)/gm, \\\"\\\");\\n        } catch {}\\n        return result;\\n    },\\n    httpHandle: function(input) {\\n        if (input.startsWith(\\\"http\\\")) {\\n            return input;\\n        } else if (input.startsWith(\\\"//\\\")) {\\n            return \\\"https:\\\" + input;\\n        } else if (input.startsWith(\\\"/\\\")) {\\n            return MY_HOME + input;\\n        }\\n    },\\n    imgHandle: function(item, rule) {\\n        var img = \\\"\\\";\\n        if (rule.img.startsWith(\\\"pd\\\")) {\\n            img = eval(rule.img);\\n        } else if (rule.backimg) {\\n            img = pdfh(item, rule.img);\\n            img = this.getBackImage(img);\\n            img = this.httpHandle(img);\\n        } else {\\n            img = pdfh(item, rule.img);\\n            if (!img.startsWith(\\\"http\\\")) {\\n                img = pd(item, rule.img);\\n                img = this.httpHandle(img);\\n            }\\n        }\\n        return img + rule.ref;\\n    },\\n    urlHandle: function(item, rule) {\\n        var href = \\\"\\\";\\n        if (rule.url.startsWith(\\\"pd\\\")) {\\n            href = eval(rule.url);\\n        } else {\\n            href = pd(item, rule.url);\\n        }\\n        href = rule.imt ? href + \\\"#immersiveTheme#\\\" : href;\\n        return href;\\n    },\\n    setContent: function(item, input) {\\n        let output = \\\"\\\";\\n        if (input == undefined) {\\n            return output;\\n        }\\n        if (input.startsWith(\\\"pd\\\")) {\\n            output = eval(input);\\n        } else {\\n            output = pdfh(item, input);\\n        }\\n        return output;\\n    },\\n    refresh: function() {\\n        addListener(\\n            \\\"onRefresh\\\",\\n            $.toString((u) => {\\n                clearMyVar(\\\"yilist\\\");\\n                //var p = storage0.getMyVar('spage', '');\\n                //putMyVar(u, p);\\n            }, çŠ¶æ€)\\n        );\\n    },\\n    getBooleanValue: function(value, defaultValue) {\\n        return value !== undefined ? Boolean(value) : (defaultValue !== undefined ? defaultValue : true);\\n    },\\n    debuglog: function(i, item, rule, obj) {\\n        log('----------' + (i + 1) + ':è°ƒè¯•å¼€å§‹----------');\\n        if (item.constructor == Object) {\\n            item = JSON.stringify(item);\\n        }\\n        log('itemå†…å®¹:\\\\r\\\\n' + item + '\\\\r\\\\n' +\\n            `\\\\n\\\\ttitleå®šä½:  ${rule.title}  ---> ç»“æœ:  ${obj.title}` +\\n            `\\\\n\\\\tdescå®šä½:  ${rule.desc}  ---> ç»“æœ:  ${obj.desc}` +\\n            `\\\\n\\\\timgå®šä½:  ${rule.img}  ---> ç»“æœ:  ${obj.img}` +\\n            (rule.content != undefined ? `\\\\n\\\\tcontentå®šä½:  ${rule.content}  ---> ç»“æœ:  ${obj.content}` : '') +\\n            `\\\\n\\\\turlå®šä½:  ${rule.url}  ---> ç»“æœ:  ${obj.url}`\\n        );\\n        log('----------' + (i + 1) + ':è°ƒè¯•ç»“æŸ----------');\\n    },\\n    jsonList: function(arr, json, rule) {\\n        if (json.constructor != Object) {\\n            try {\\n                json = JSON.parse(json);\\n            } catch {}\\n        }\\n        if (json[rule.list] == undefined) {\\n            arr.push({\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>æ— å†…å®¹</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {},\\n            });\\n            return;\\n        }\\n        var debug = this.getBooleanValue(rule.debug, false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        json[rule.list].forEach((item, i) => {\\n            var title = eval(rule.title);\\n            var desc = eval(rule.desc);\\n            var content = eval(rule.content);\\n            var img = eval(rule.img) + rule.ref;\\n            var href = eval(rule.url);\\n            var url = rule.imt ? href + \\\"#immersiveTheme#\\\" : href;\\n            var lazy = rule.lazy ? rule.lazy : \\\"\\\";\\n\\n            var dd = {\\n                title: title,\\n                desc: desc,\\n                content: content,\\n                pic_url: img,\\n                url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                col_type: rule.col_type,\\n                extra: {\\n                    img: img,\\n                },\\n            };\\n\\n            if (debug) {\\n                var rx = {\\n                    title,\\n                    desc,\\n                    img,\\n                    content,\\n                    url\\n                };\\n                this.debuglog(i, item, rule, rx);\\n            }\\n\\n            if (lazy != \\\"\\\") {\\n                dd[\\\"url\\\"] = href + lazy;\\n            }\\n            arr.push(dd);\\n        });\\n    },\\n    ruleList: function(arr, html, rule) {\\n        var list = pdfa(html,\\n            rule.list);\\n        var debug = this.getBooleanValue(rule.debug,\\n            false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        list.forEach((item, i) => {\\n            var title = this.setContent(item, rule.title);\\n            var desc = this.setContent(item, rule.desc);\\n            var img = this.imgHandle(item, rule);\\n            var url = this.urlHandle(item, rule);\\n            var content = this.setContent(item, rule.content);\\n\\n            if (debug) {\\n                var rx = {\\n                    title,\\n                    desc,\\n                    img,\\n                    content,\\n                    url\\n                };\\n                this.debuglog(i, item, rule, rx);\\n            }\\n\\n            var lazy = rule.lazy ? rule.lazy : \\\"\\\";\\n            var dd = {\\n                title: title,\\n                desc: desc,\\n                pic_url: img,\\n                url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                content: content,\\n                col_type: rule.col_type,\\n                extra: {\\n                    img: img,\\n                },\\n            };\\n            if (lazy != \\\"\\\") {\\n                dd[\\\"url\\\"] = url + lazy;\\n            }\\n            arr.push(dd);\\n        });\\n    },\\n    List: function(arr, html, rule, param) {\\n        param = param ? param : {};\\n        var auto = param.auto ? param.auto : false;\\n        var show = param.show ? param.show : false;\\n        if (page == 1) {\\n            //this.spage.set(true_url);\\n        }\\n        this.refresh();\\n        var debug = this.getBooleanValue(rule.debug, false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        var list = pdfa(html, rule.list);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        //log(this.nextPage())\\n        if ((storage0.getMyVar('yi_isnext', 't') == 't' && list.length > 0) || page == 1) {\\n            list.forEach((item, i) => {\\n                deleteItem(\\\"pagenum\\\");\\n                deleteItem(\\\"pageline\\\");\\n                var id = \\\"\\\";\\n                var cls = \\\"\\\";\\n                var title = this.setContent(item, rule.title);\\n                var desc = this.setContent(item, rule.desc);\\n                var desc1 = this.setContent(item, rule.desc1);\\n                var img = this.imgHandle(item, rule);\\n                var url = this.urlHandle(item, rule);\\n                var content = this.setContent(item, rule.content);\\n\\n                if (debug) {\\n                    var rx = {\\n                        title,\\n                        desc,\\n                        img,\\n                        content,\\n                        url\\n                    };\\n                    this.debuglog(i, item, rule, rx);\\n                }\\n\\n                if (i == list.length - 1) {\\n                    id = \\\"lastid_\\\" + page;\\n                    cls = \\\"lastmark\\\";\\n                }\\n                d.push({\\n                    title: title,\\n                    desc: desc + '\\\\t\\\\t\\\\té˜…è¯»æ•°ï¼š' + desc1,\\n                    pic_url: img,\\n                    url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                    content: content,\\n                    col_type: rule.col_type,\\n                    extra: {\\n                        img: img,\\n                        id: id,\\n                        cls: cls,\\n                    },\\n                });\\n                if (i == list.length - 1 && show) {\\n                    d.push({\\n                        col_type: \\\"line\\\",\\n                        extra: {\\n                            id: \\\"pageline\\\",\\n                        },\\n                    });\\n\\n                    d.push({\\n                        title: \\\"â€œâ€œâ€â€<small>åŠ è½½ä¸­...</small>\\\",\\n                        url: \\\"hiker://empty\\\",\\n                        col_type: \\\"text_center_1\\\",\\n                        extra: {\\n                            id: \\\"pagenum\\\",\\n                        },\\n                    });\\n                }\\n            });\\n        } else {\\n            updateItem(\\\"pagenum\\\", {\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>åˆ°åº•äº†</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {\\n                    id: \\\"last\\\",\\n                },\\n            });\\n        }\\n        if (list.length == 0 && page == 1) {\\n            d.push({\\n                col_type: \\\"line\\\",\\n            });\\n            d.push({\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>æ— å†…å®¹</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {},\\n            });\\n        }\\n        if (this.nextPage()) {\\n            //log('t');\\n            storage0.putMyVar('yi_isnext', 't');\\n        } else {\\n            //log('f');\\n            storage0.putMyVar('yi_isnext', 'f');\\n        }\\n        if (auto) {\\n            //createNextPage();\\n            autoPage();\\n        }\\n    },\\n};\\n\\nvar extMethod = {\\n    ToParams: function() {\\n        var json = arguments[0];\\n        return Object.keys(json)\\n            .map((key) => key + \\\"=\\\" + json[key])\\n            .join(\\\"&\\\");\\n    },\\n    urlParse: function(u) {\\n        var dict = {};\\n        dict.Source = u;\\n        let params = (url) => {\\n            let queryParams = {};\\n            let reg = /([^?=&]+)=([^?=&]+)/g;\\n            url.replace(reg, function() {\\n                queryParams[arguments[1]] = arguments[2];\\n            });\\n            return queryParams;\\n        };\\n        var javaUrl = JavaImporter(java.net.URL);\\n        with(javaUrl) {\\n            var url = new URL(u);\\n            dict.Protocol = url.getProtocol();\\n            dict.Host = url.getHost();\\n            dict.Port = url.getPort();\\n            dict.File = url.getFile();\\n            dict.Path = url.getPath();\\n            dict.Ref = url.getRef();\\n            dict.Hosts = `${dict.Protocol}://${url.getHost()}`;\\n        }\\n        dict.Params = params(u);\\n        return dict;\\n    },\\n    isEqual: function(x, y) {\\n        const ok = Object.keys,\\n            tx = typeof x,\\n            ty = typeof y;\\n        return x && y && tx === \\\"object\\\" && tx === ty ?\\n            ok(x).length === ok(y).length &&\\n            ok(x).every((key) => this.isEqual(x[key], y[key])) : x === y;\\n    },\\n    findDifferentIndex: function(str1, str2) {\\n        const diffChars = [];\\n        for (let i = 0; i < str2.length; i++) {\\n            if (str1[i] !== str2[i]) {\\n                diffChars.push({\\n                    index: i,\\n                    s1: str1[i],\\n                    s2: str2[i],\\n                });\\n            }\\n        }\\n        return diffChars;\\n    },\\n    replaceCharAt: function(str, index, replacement) {\\n        if (index < 0 || index >= str.length) {\\n            return str;\\n        }\\n        //log(index)\\n        const arr = str.split(\\\"\\\");\\n        arr[index] = replacement;\\n        return arr.join(\\\"\\\");\\n    },\\n    getObjectKeysDiff: function(obj1, obj2) {\\n        const differentKeys = [];\\n        for (let key in obj1) {\\n            if (!obj2.hasOwnProperty(key) || obj1[key] !== obj2[key]) {\\n                differentKeys.push(key);\\n            }\\n        }\\n        for (let key in obj2) {\\n            if (!obj1.hasOwnProperty(key)) {\\n                differentKeys.push(key);\\n            }\\n        }\\n        return differentKeys;\\n    },\\n    getNextUrl: function(source, target, params) {\\n        var u1 = this.urlParse(source);\\n        var u2 = this.urlParse(target);\\n        var pa = undefined;\\n        if (typeof params == \\\"object\\\") {\\n            pa = params.hasOwnProperty(\\\"ç‰¹å¾\\\") ? params.ç‰¹å¾ : undefined;\\n        }\\n        var nexturl = source;\\n        var ca = Object.keys(u2.Params).length == 0 ? \\\"\\\" : \\\"?\\\";\\n        if (pa != undefined) {\\n            var rs = String(u2.Path).replace(new RegExp(pa), \\\"$1fypage\\\");\\n            nexturl = u2.Hosts + rs + ca + this.ToParams(u2.Params);\\n        } else {\\n            if (this.isEqual(u1.Params, u2.Params)) {\\n                if (dt_debug) {\\n                    log(u1.Path);\\n                    log(u2.Path);\\n                }\\n                var df = this.findDifferentIndex(String(u1.Path), String(u2.Path));\\n                if (dt_debug) {\\n                    log(df);\\n                }\\n                if (df.length == 1) {\\n                    var re = df[0].index;\\n                } else {\\n                    var f = df.filter((x) => /\\\\d+/.test(x.s2));\\n                    var re = f[0].index;\\n                }\\n                var eq = this.replaceCharAt(String(u2.Path), re, \\\"fypage\\\");\\n                nexturl = u2.Hosts + eq + ca + this.ToParams(u2.Params);\\n            } else {\\n                var ep = this.getObjectKeysDiff(u1.Params, u2.Params)\\n                if (ep.length == 1) {\\n                    u1.Params[ep[0]] = 'fypage'\\n                } else {\\n                    log(ep);\\n                }\\n                var eq = String(u1.Path).replace(/\\\\d+/, \\\"fypage\\\");\\n                nexturl = u1.Hosts + eq + ca + this.ToParams(u1.Params);\\n            }\\n        }\\n        //log('next:'+nexturl)\\n        return nexturl;\\n    },\\n};\\n\\nfunction getTruelink(mark, url, page) {\\n    var p = getMyVar(mark, url).replace(\\\"fypage\\\", page);\\n    if (page == 1) {\\n        return getMyVar(\\\"yi_firstpage\\\", p);\\n    } else if (p != \\\"\\\") {\\n        return p;\\n    } else {\\n        return url;\\n    }\\n}\\n//æ„å»º\\nfunction createNextPage() {\\n    let startnum = 1;\\n    var obj = arguments[0];\\n    if (true_url != getMyVar(\\\"yi_pageurl\\\", \\\"\\\")) {\\n        clearMyVar(\\\"yi_pageurl\\\");\\n    }\\n    if (page == startnum && getMyVar(\\\"yi_pageurl\\\") == \\\"\\\") {\\n        putMyVar(\\\"yi_firstpage\\\", true_url);\\n        try {\\n            var next = eval(ä¸‹ä¸€é¡µ);\\n            //log(\\\"next\\\");\\n            //log(next);\\n        } catch {\\n            log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n            next = \\\"\\\";\\n        }\\n        if (next != \\\"\\\") {\\n            var nxurl = extMethod.getNextUrl(true_url, next, obj);\\n            //log(\\\"nxurl:\\\" + nxurl);\\n            putMyVar(çŠ¶æ€, nxurl);\\n            putMyVar(\\\"yi_pageurl\\\", nxurl);\\n        }\\n    }\\n}\\n\\nfunction autoPage() {\\n    if (page == 1) {\\n        putMyVar(\\\"yi_firstpage\\\", true_url);\\n    }\\n    try {\\n        var next = eval(ä¸‹ä¸€é¡µ);\\n        //log(\\\"next\\\");\\n        //log('next:'+next);\\n    } catch {\\n        log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n        next = \\\"\\\";\\n    }\\n    if (next != \\\"\\\") {\\n        putMyVar(çŠ¶æ€, next);\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"è§£æ\",\"path\":\"lazy\",\"rule\":\"var lazy = $('').lazyRule((MY_HOME,rule) => { \\n        return \\\"hiker://page/aliyun?rule=äº‘ç›˜å›.ç®€&page=fypage&realurl=\\\" + encodeURIComponent(input);\\n}, MY_HOME, MY_RULE.title)\"},{\"col_type\":\"movie_3\",\"name\":\"ç¯å¢ƒ\",\"path\":\"repair\",\"rule\":\"js:\\nvar document = {};\\nvar window = {\\n    location: {\\n        reload: function() {\\n            return;\\n        }\\n    }\\n};\\n\\n// å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç”¨äºå­˜å‚¨ cookie åç§°å’Œå€¼çš„é”®å€¼å¯¹\\nvar cookies = {};\\nObject.defineProperty(document, 'cookie', {\\n    enumerable: true,\\n    configurable: true,\\n    get: function() {\\n        return Object.entries(cookies).map(([key, value]) => `${key}=${value}`).join('; ');\\n    },\\n    set: function(value) {\\n        var list = [];\\n        if (value.includes(';')) {\\n            list = value.split(';');\\n        } else {\\n            list = [value];\\n        }\\n        list.forEach(x => {\\n            var index = x.indexOf(\\\"=\\\");\\n            var key = x.substring(0, index).trim();\\n            var value = x.substring(index + 1);\\n            cookies[key] = value;\\n        })\\n    }\\n});\\n\\nfunction guard(url, headobj) {\\n    var head = headobj ? headobj:{\\n        headers: {\\n            Cookie: getCookie(url),\\n        }\\n    }\\n    var html = fetchCodeByWebView(url, head);\\n    if (html.includes('_guard/auto.js')) {\\n        document[\\\"cookie\\\"] = getCookie(url);\\n        eval(fetch(getHome(url) + '/_guard/auto.js'))\\n        html = fetch(url, {\\n            headers: {\\n                Cookie: document[\\\"cookie\\\"],\\n            }\\n        });\\n    }\\n    //log(document[\\\"cookie\\\"])\\n    return html\\n}\"}]","proxy":"","icon":"https://www.yxzhi.com/wp-content/uploads/2023/06/favicon-350x300.png"}